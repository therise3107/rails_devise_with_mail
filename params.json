{"name":"Rails devise with mail","tagline":"Rails,Devise,Email","body":"#rails devise app with email\r\nfully functional app demonstarting how to use DEVISE with MAILING facility.\r\n\r\nAdditional Gems which are used :-\r\n\r\n* rails_layout\r\n\r\n* devise\r\n\r\n* bootstrap\r\n\r\n* better_error\r\n\r\n\r\n##create a new rails project\r\n\r\n    rails new devise_app\r\nswitch you your newly created app\r\n\r\n    cd devise_app\r\nopen your Gemfile and add\r\n\r\n    group :development do\r\n      gem \"better_errors\"\r\n    end\r\n###bootstrap for some awesome features\r\n\r\n    gem 'bootstrap-sass', '~> 3.2.0'\r\n    gem 'autoprefixer-rails'\r\n    gem 'devise'\r\n###rails_layout for bootstrap or zorb foundation\r\n\r\n    group :development do\r\n      gem 'rails_layout'\r\n    end\r\nrun bundle to install the new gems\r\n\r\n    bundle\r\n###Configuring rails_layout for handling bootstrap\r\nrun \r\n\r\n    rails g layout:install bootstrap3\r\nto install bootstap3 for your app \r\n\r\n    rails g scaffold post title body:text\r\n    rake db:migrate\r\nthis will create the post model, controller and views for you\r\n\r\n###configure Devise\r\n\r\n    rails g devise:install\r\n    rails g devise user\r\n    rake db:migrate\r\nthis will create a user model for handling the user accounts\r\n\r\n###Configuring layout for devise and navigational links\r\n\r\n    rails g layout:devise bootstrap3\r\n    rails g layout:navigation\r\nthese commands will add and modify the view files for devise and will add navigation at home page\r\n###Creating the mailer \r\n\r\n    rails g mailer mailer\r\nthis will create a mailer for you in app/mailer/mailer.rb , open mailer.rb and add the following code\r\n\r\n    default from: \"from@example.com\"\r\n    def confirmation_instructions(user)\r\n      @user = user\r\n  \t  mail(to: @user.email, subject: 'Account confirmation_instructions')\r\n    end\r\n    \r\n    def reset_password_instructions(user)\r\n  \t  @user = user\r\n  \t  mail(to: @user.email, subject: 'reset_password_instructions')\r\n    end\r\n    def unlock_instructions(user)\r\n  \t  @user = user\r\n  \t  mail(to: @user.email, subject: 'unlock_instructions')\r\n    end\r\nthis are the functions which will be invoked by devise for you, to change the views created by devise for you run\r\n\r\n    rails g devise:views\r\n\r\n###SMTP configuration\r\nadd these lines of code in your config/env/develpoment.rb\r\n\r\n    config.action_mailer.default_url_options = { host: 'localhost', port: 3000 }\r\n    config.action_mailer.delivery_method = :smtp\r\n    # SMTP settings for gmail\r\n    config.action_mailer.smtp_settings = {\r\n      :address              => \"smtp.gmail.com\",\r\n      :port                 => 587,\r\n      :user_name            => ENV['gmail_user_name'],\r\n      :password             => ENV['gmail_password'],\r\n      :authentication       => \"plain\",\r\n      :enable_starttls_auto => true\r\n      }\r\n \r\n and set \r\n    \r\n    config.action_mailer.raise_delivery_errors = true\r\nthis will raise errors whenever you mess up, but do not worry we have added better_errors!\r\n###Setting ENV variables\r\ncreate a new .env file in your root dir and add\r\n\r\n    ENV[\"gmail_user_name\"] = yourgamiladdres.com\r\n    ENV[\"gmail_password\"]  = youpassword\r\ndo not forget to add .env file in you .gitignore file if you are going to push your app on github\r\n\r\n###Adding relationship between models\r\n  add this in your app/model/user.rb\r\n  \r\n      has_many :posts\r\n  \r\n  add this in your app/post.rb\r\n  \r\n      belongs_to :user\r\n\r\n###User Auth Mechanism\r\nadd this code in your posts_controller.rb\r\n\r\n    before_action :authenticate_user!,only: [:new,:edit, :update, :destroy]\r\n    before_action :own_auth, only: [:new,:edit, :update, :destroy]\r\n    ....\r\n    ....\r\n    def create\r\n      @post = Post.new(post_params)\r\n      @user_id = current_user.id\r\n      @post.save\r\n      respond_with(@post)\r\n    end\r\n    ....\r\n    ....\r\n    private\r\n     def own_auth\r\n      if !user_signed_in? || current_user != Post.find(params[:id])\r\n        redirect_to root_path, notice: \"you cannot modify this content, please authenticate yourself\"\r\n      end\r\n    end\r\n\r\nnow run \r\n\r\n    rails s\r\n  \r\nand enjoy your newly  created site\r\n\r\n\r\ncreated by **Lalit Yadav** \r\n\r\n\r\n\r\n    \r\n\r\n    \r\n\r\n","google":"UA-59198408-1","note":"Don't delete this file! It's used internally to help with page regeneration."}